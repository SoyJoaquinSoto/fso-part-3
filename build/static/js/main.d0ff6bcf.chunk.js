(this.webpackJsonpagenda=this.webpackJsonpagenda||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(18),i=t.n(c),o=t(19),u=t(7),s=t(9),d=t(5),m=t(0),j=function(e){var n=e.nameFilter,t=e.handleChange;return Object(m.jsxs)("div",{children:["filter shown with:",Object(m.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.handleSubmit,t=e.newPerson,a=e.handleChange;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name:"," ",Object(m.jsx)("input",{name:"name",value:t.name,onChange:a})]}),Object(m.jsxs)("div",{children:["number:"," ",Object(m.jsx)("input",{name:"number",value:t.number,onChange:a})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.persons,t=e.nameFilter,a=e.deletePerson;return Object(m.jsx)("div",{children:n&&n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return Object(m.jsxs)("p",{children:[e.name," ",e.number,Object(m.jsx)("button",{onClick:function(){return a(e)},children:"delete"})]},e.name)}))})},l=t(4),h=t.n(l),p="/api/persons",O={getAll:function(){return h.a.get(p).then((function(e){return e.data}))},create:function(e){return h.a.post(p,e).then((function(e){return e.data}))},update:function(e,n){return h.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return h.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))}},g=function(e){var n=e.notification;return n.message?Object(m.jsx)("div",{className:"notification ".concat(n.type),children:n.message}):null},v=function(){var e=Object(a.useState)([]),n=Object(d.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)({name:"",number:""}),i=Object(d.a)(c,2),l=i[0],h=i[1],p=Object(a.useState)(""),v=Object(d.a)(p,2),x=v[0],y=v[1],w=Object(a.useState)({message:"",type:""}),C=Object(d.a)(w,2),S=C[0],k=C[1];Object(a.useEffect)((function(){O.getAll().then((function(e){r(e)}))}),[]);return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(g,{notification:S}),Object(m.jsx)(j,{nameFilter:x,handleChange:function(e){y(e.target.value)}}),Object(m.jsx)("h2",{children:"add a new"}),Object(m.jsx)(b,{handleSubmit:function(e){if(e.preventDefault(),l.name&&l.number){var n=t.find((function(e){return e.name===l.name}));n?window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one?"))&&O.update(n.id,l).then((function(e){r(t.map((function(n){return n.id===e.id?e:n}))),k({message:"Updated ".concat(l.name),type:"success"}),setTimeout((function(){return k({message:"",type:""})}),2e3),h({name:"",number:""})})).catch((function(e){if(404===e.response.status)return r(t.filter((function(e){return e.id!==n.id}))),k({message:"Information of ".concat(n.name," has already been removed from the server"),type:"error"}),void setTimeout((function(){return k({message:"",type:""})}),2e3);k({message:e.response.data.error,type:"error"}),setTimeout((function(){return k({message:"",type:""})}),4e3)})):O.create(l).then((function(e){r([].concat(Object(o.a)(t),[e])),k({message:"Added ".concat(l.name),type:"success"}),setTimeout((function(){return k({message:"",type:""})}),2e3),h({name:"",number:""})})).catch((function(e){k({message:e.response.data.error,type:"error"}),setTimeout((function(){return k({message:"",type:""})}),4e3)}))}},newPerson:l,handleChange:function(e){h(Object(s.a)(Object(s.a)({},l),{},Object(u.a)({},e.target.name,e.target.value)))}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(f,{persons:t,nameFilter:x,deletePerson:function(e){window.confirm("Seguro que desea eliminar a ".concat(e.name))&&O.remove(e.id).then(r(t.filter((function(n){return n.id!==e.id}))))}})]})};t(43);i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(v,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.d0ff6bcf.chunk.js.map